<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Meteor+angularjs 实现轻论坛系列一 | YzzTing Blog</title>
  <meta name="baidu-site-verification" content="UDSAIWEHdt" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Meteor的官网( Meteor )这样介绍这个框架：

Meteor is an open-source platform for building top-quality web apps in a fraction of the time, whether you’re an expert developer or just getting started.

按我自己的理解来说，Mete">
<meta property="og:type" content="article">
<meta property="og:title" content="Meteor+angularjs 实现轻论坛系列一">
<meta property="og:url" content="http://www.yzz1995.cn/2015/12/10/meteor+angularjs-1/index.html">
<meta property="og:site_name" content="YzzTing Blog">
<meta property="og:description" content="Meteor的官网( Meteor )这样介绍这个框架：

Meteor is an open-source platform for building top-quality web apps in a fraction of the time, whether you’re an expert developer or just getting started.

按我自己的理解来说，Mete">
<meta property="og:image" content="http://7xp1k3.com1.z0.glb.clouddn.com/QQ截图20151208212013.png">
<meta property="og:image" content="http://7xp1k3.com1.z0.glb.clouddn.com/20151209215348.png">
<meta property="og:image" content="http://7xp1k3.com1.z0.glb.clouddn.com/20151209221415.png">
<meta property="og:image" content="http://7xp1k3.com1.z0.glb.clouddn.com/1449322982021.png">
<meta property="og:updated_time" content="2015-12-17T17:52:08.823Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Meteor+angularjs 实现轻论坛系列一">
<meta name="twitter:description" content="Meteor的官网( Meteor )这样介绍这个框架：

Meteor is an open-source platform for building top-quality web apps in a fraction of the time, whether you’re an expert developer or just getting started.

按我自己的理解来说，Mete">
  
    <link rel="alternative" href="/atom.xml" title="YzzTing Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xp1k3.com1.z0.glb.clouddn.com/_favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xp1k3.com1.z0.glb.clouddn.com/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Yzz</a></h1>
		</hgroup>

		
		
		<p class="header-subtitle">脑子转不过弯的杨滋滋</p>
		
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/yzzting" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/yzzting" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/yang-zi-zi-6-68" title="zhihu">zhihu</a>
					        
								<a class="rss" target="_blank" href="/" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/ukulele/" style="font-size: 10px;">ukulele</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/随笔/" style="font-size: 20px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.ahonn.me">ahonn的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://henbukexue.science">刘帆帆的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我叫杨挺，也可以叫杨滋滋，Yzz。非典型前端路上的码畜</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Yzz</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7xp1k3.com1.z0.glb.clouddn.com/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Yzz</h1>
			</hgroup>
			
			<p class="header-subtitle">脑子转不过弯的杨滋滋</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/yzzting" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/yzzting" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/yang-zi-zi-6-68" title="zhihu">zhihu</a>
			        
						<a class="rss" target="_blank" href="/" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-meteor+angularjs-1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/10/meteor+angularjs-1/" class="article-date">
  	<time datetime="2015-12-10T04:00:00.000Z" itemprop="datePublished">2015-12-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Meteor+angularjs 实现轻论坛系列一
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AngularJS/">AngularJS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Meteor的官网( Meteor )这样介绍这个框架：</p>
<blockquote>
<p>Meteor is an open-source platform for building top-quality web apps in a fraction of the time, whether you’re an expert developer or just getting started.</p>
</blockquote>
<p>按我自己的理解来说，Meteor是互联网江湖里面的<strong>倚天剑</strong>，<strong>屠龙刀</strong>。不同的是，不是<strong>孤品</strong>，人人可以有，就连我这个js菜鸟的可以比划几下</p>
<a id="more"></a>
<p>首先讲一下我的开发环境（ubuntu15.10 + sublime text 3）</p>
<p>#<strong>环境搭建</strong></p>
<p>ubuntu环境下安装meteor特别容易</p>
<ul>
<li><p>$ curl <a href="https://install.meteor.com/" target="_blank" rel="external">https://install.meteor.com/</a> | sh</p>
</li>
<li><p>$ meteor –version</p>
</li>
</ul>
<p>敲入上面的命令后，出现版本号说明  安装成功！</p>
<ul>
<li>$ meteor create Demo </li>
</ul>
<p>这里，我们创建了meteor的一个实例 </p>
<ul>
<li><p>$ cd Demo </p>
</li>
<li><p>$ meteor </p>
</li>
</ul>
<p>我们通过 $ meteor 在项目的根目录启动这个 Demo 的实例 ，停止这个服务 Ctrl + c</p>
<p><img src="http://7xp1k3.com1.z0.glb.clouddn.com/QQ截图20151208212013.png" alt=""></p>
<p>在这个项目中，meteor默认启动了Mongodb数据库。然后打开 <a href="http://localhost:3000" target="_blank" rel="external">http://localhost:3000</a> </p>
<p><img src="http://7xp1k3.com1.z0.glb.clouddn.com/20151209215348.png" alt=""></p>
<p>我们可以看到一个Meteor的默认初始页面，可以显示鼠标点击按钮的次数。<br>回到项目目录中，查看Demo文件夹，里面只有三个文件，分别是Demo.html,Demo.css,Demo.js Meteor中的javaScript代码可以在服务端和客户端同时运行！所以只有一个javaScript文件。</p>
<p><img src="http://7xp1k3.com1.z0.glb.clouddn.com/20151209221415.png" alt=""></p>
<p>Meteor创建简单的app直接在项目根目录下创建js文件、HTML文件和CSS文件即可。运行项目的时候，所有的CSS文件，都会自动引入到HTML文件，而所有的HTML文件，都会拼成一个HTML文件。下面，我们去掉官方默认的模板，添加<strong>Angular</strong>进来</p>
<p>#<strong>添加angularjs到Meteor项目中</strong></p>
<p>首先删掉初始化项目生成的三个文件</p>
<ul>
<li>$ rm Demo.html Demo.css Demo.js  </li>
</ul>
<p>然后我们新建一个 index.html 的文件,并敲入下面的代码，就是下面的代码，其他都不要！</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span>&gt;</span>Yzz!!<span class="tag">&lt;/<span class="title">p</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里，只写了 <code>&lt;body&gt;&lt;/body&gt;</code>这个标签，因为Meteor会扫描所有HTML文件，然后通过一系列的<br>整合，组成一个新的文件，自动补全其他标签</p>
<p>meteor吧！</p>
<ul>
<li>$meteor  </li>
</ul>
<p>start 项目后，去<a href="http://localhost:3000，" target="_blank" rel="external">http://localhost:3000，</a></p>
<p>会看到页面上显示Yzz!!字样。</p>
<p>ok 下一步，我们添加Angular包(**在项目的根目录下add，以后无论是add什么包，都是这样！)</p>
<ul>
<li>$meteor add angular  </li>
</ul>
<p>添加完成后，以后run这个项目，前端会自动引用这个Angular，不必我们手动引入</p>
<p>touch一个新文件</p>
<ul>
<li>$touch index.ng.html </li>
</ul>
<p>这里，我们用了.ng.html 的后缀，为了不让Meteor的默认模板（Blaze）就不会便宜到这个文件，Angular就可以使用这个文件了，然后敲入代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>Yzz Angular!<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>修改 index.html 的代码 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-include</span>=<span class="value">"'index.ng.html'"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 这里使用了Angular的一个指令，ng-include用于引入外部HTML文件，注意这里的双引号里面还有单引号。然后在创建一个app.js文件，并输入如下代码<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Meteor.isClient) &#123;</span><br><span class="line"><span class="comment">// 创建 Angular module</span></span><br><span class="line"><span class="comment">// 并添加 angular-meteor 包依赖</span></span><br><span class="line">angular.module(<span class="string">'Yzz'</span>, [<span class="string">'angular-meteor'</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>添加ng-app到index.html中<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">"Yzz"</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-include</span>=<span class="value">"index.ng.html"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Meteor</strong> </p>
<p><img src="http://7xp1k3.com1.z0.glb.clouddn.com/1449322982021.png" alt=""></p>
<p>额。。报错了，代码并没写错。。为什么？？<br>   别急。</p>
<p>  <strong> Meteor 1.2.1 </strong> 在angular模板这一块更新了二个组件 查看<a href="http://www.angular-meteor.com/tutorials/socially/angular1/bootstrapping" target="_blank" rel="external">官方文档</a> 在add Angular 1 这一块刚好写到 </p>
<blockquote>
<p>It’s time to add Angular 1 to our stack!</p>
<p>Because we decided to work with AngularJS in the client side, we need to remove the default UI package of Meteor, called Blaze.</p>
<p>We also need to remove Meteor’s default ECMAScript2015 package named ecmascript because Angular-Meteor uses a package named angular-babel in order to get both ECMAScript2015 and AngularJS DI annotations.</p>
<p>So let’s remove it by running:</p>
<p>   $ meteor remove blaze-html-templates</p>
<p>   $ meteor remove ecmascript</p>
<p>Now let’s add the Angular 1 package to Meteor, back in the command line, launch this command:</p>
<p>   $ meteor add angular</p>
<p>This package takes care of connecting Angular 1 to Meteor and includes the latest Angular 1 library code into our app.</p>
<p>That’s it! Now we can use Angular 1’s power in our Meteor app.</p>
</blockquote>
<p> ok,因为html，有两个插件都在处理html文件， 所以产生了冲突，angular-templates, templating，删掉blaze-html-templates，就保留了angular-templates</p>
<p> 另外js meteor 1.2.0.x 官方推荐用的是ecmascript，他是es6的转码器，不过angular-meteor自带的是angular-babel，用了angular-meteor还是照着它的文档来吧！</p>
<p> ok 现在meteor它，没问题！</p>
<p> <strong>官方文档</strong>说meteor是根据文件夹来区别是服务端还是客户端，所以我们将项目目录整理一下</p>
<ul>
<li><p>server：此文件夹下的代码只会在服务器端运行</p>
</li>
<li><p>client：此文件夹下的代码只会在客户端运行</p>
</li>
<li><p>public：这个文件夹下面的所有文件都可以直接公开访问</p>
</li>
</ul>
<p>我们先创建三个文件夹，即client、server和model。client中放只需要客户端运行的代码，server放只需要服务端运行的代码，model放定义数据库collection的代码，客户端和服务端都需要运行</p>
<p>然后把index.html、index.ng.html和app.js文件移动到client文件夹下面，并修改app.js代码为</p>
<ul>
<li>angular.module(‘Yzz’, [‘angular-meteor’]); </li>
</ul>
<p>因为app.js 现在在client文件夹下面并在客户端运行，所以我们不用 <strong>Meteor.isClient </strong></p>
<p>index.html文件中ng-include引入的文件路径必须完整，修改index.html代码如下所示<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-include</span>=<span class="value">"'client/index.ng.html'"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p> ok,运行它 meteor</p>
<p>嗯，效果一样！，但是项目结构我们清晰了！</p>
<p>至此，我们成功的搭建了Meteor，并整合了angularjs，下一次将完成论坛用户模块！</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/12/13/杨滋滋的由来/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          杨滋滋的由来
        
      </div>
    </a>
  
  
    <a href="/2015/12/09/First article/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">第一篇文章</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="meteor+angularjs-1" data-title="Meteor+angularjs 实现轻论坛系列一" data-url="http://www.yzz1995.cn/2015/12/10/meteor+angularjs-1/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"yzzting"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Yzz
    	</div>
  
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: undefined,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






  </div>
</body>
</html>